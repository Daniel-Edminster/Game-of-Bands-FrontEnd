(this["webpackJsonpgameofbands.com"]=this["webpackJsonpgameofbands.com"]||[]).push([[0],{110:function(e,t,a){},152:function(e,t,a){e.exports=a.p+"static/media/GOBLogo-Clean.7ef2f3f7.png"},173:function(e,t,a){e.exports=a(283)},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},185:function(e,t,a){},204:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},283:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(7),r=a.n(o),i=(a(178),a(15)),c=a(16),l=a(18),m=a(17),u=a(13),d=a(35),_=(a(179),a(152)),p=a.n(_),g=(a(180),"https://danieledminster.com:8080"),f=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a),(e=t.call(this)).sessionCheck=function(){var t="".concat(g,"/sessioncheck");fetch(t,{credentials:"include",method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("Fetch Response: ",t),"key"in t&&!1===e.state.auth?(e.setState({auth:!0,username:t.key,access_token:t.tokens.access_token,refresh_token:t.tokens.refresh_token,expiry:t.tokens.expires_at,expirySeconds:t.tokens.expires_in}),e.getUserLinks(!0)):e.getUserLinks(!1)}))},e.getUserLinks=function(t){!0===t?(console.log("getUserLinks",t),e.userLinkArray=[{name:e.state.username,href:"/user/".concat(e.state.username),class:"Navbar__Flexbox__Right__Item"},{name:"Admin",href:"/admin",class:"Navbar__Flexbox__Right__Item"},{name:"Submit song",href:"/submitsong",class:"Navbar__Flexbox__Right__Item__Button"},{name:"Logout",href:"/logout",class:"Navbar__Flexbox__Right__Item"}],e.setState({linkarray:e.userLinkArray})):(e.userLinkArray=[{name:"Login",href:"".concat(g,"/auth/reddit"),class:"Navbar__Flexbox__Right__Item__Button"}],e.setState({linkarray:e.userLinkArray}))},e.logoutOverride=function(t){t.preventDefault(),e.delete_cookie("__gameofbandsdev"),e.sessionCheck(),e.setState({auth:!1}),window.location="/"},e.delete_cookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},e.renderLinkArray=function(){return e.state.linkarray.map((function(t,a){return"Login"===t.name?s.a.createElement("div",{key:a,className:t.class},s.a.createElement("a",{href:t.href},t.name)):"Logout"===t.name?s.a.createElement("div",{key:a,className:t.class},s.a.createElement("a",{href:t.href,onClick:e.logoutOverride},t.name)):s.a.createElement("div",{key:a,className:t.class},s.a.createElement(u.b,{to:t.href},t.name))}))};var n=[{name:"Login",href:"".concat(g,"/auth/reddit"),class:"Navbar__Flexbox__Right__Item__Button"}];e.state={auth:!1,linkarray:n};return e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.sessionCheck()}},{key:"render",value:function(){return s.a.createElement("div",{className:"Navbar"},s.a.createElement("div",{className:"Navbar__Flexbox__Left"},s.a.createElement("div",{className:"Navbar__Flexbox__Left__Brand"},s.a.createElement("img",{src:p.a,alt:"Game of Bands Logo.",className:"Navbar__Flexbox__Left__Brand__img"})),s.a.createElement("div",{className:"Navbar__Flexbox__Left__Item"},s.a.createElement("a",{href:"#"},"Rounds")),s.a.createElement("div",{className:"Navbar__Flexbox__Left__Item"},s.a.createElement(u.b,{to:"/"},"Songs")),s.a.createElement("div",{className:"Navbar__Flexbox__Left__Item"},s.a.createElement("a",{href:"https://reddit.com/r/gameofbands",target:"_blank"},"/r/gameofbands")),s.a.createElement("div",{className:"Navbar__Flexbox__Left__Item"},s.a.createElement("a",{href:"https://discordapp.com/invite/h7ywF3"},"Discord"))),s.a.createElement("div",{className:"Navbar__Flexbox__Right"},this.renderLinkArray()))}}]),a}(n.Component),h=a(163),v=(a(185),a(21)),S=a.n(v),y=a(41),b=a.n(y),E=a(49),N=a.n(E),k=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).convertToTrophy=function(e){return null==e?"":1===parseInt(e)?s.a.createElement("span",{className:"material-icons"},"emoji_events"):void 0},e.getSongList=function(){console.log("starting song api request"),b.a.get("https://danieledminster.com:8080/all/desc").then((function(t){console.log("songs axios: ",t),e.setState({Songs:t.data},e.segmentedSongRender)}))},e.updateProgress=function(t){e.state.Songs.length-t===1&&e.setState({loading:!1})},e.getSongJSX=function(){var t=e.state.Songs.map((function(t,a){var n=e.convertToTrophy(t.winner);return s.a.createElement("div",{key:a,className:"SongDisplay__Item"},s.a.createElement("div",{className:"SongDisplay__Item__PlayIcon"},s.a.createElement("span",{className:"material-icons",onClick:e.props.play,"data-musicSrc":t.streamurl,"data-name":t.name,"data-artists":"".concat(t.music,", ").concat(t.lyrics,", ").concat(t.vocals)},"play_circle_filled")),s.a.createElement("div",{className:"SongDisplay__Item__PlayListAdd"},s.a.createElement("span",{className:"material-icons"},"playlist_add")),s.a.createElement("div",{className:"SongDisplay__Item__Round"},t.round),s.a.createElement("div",{className:"SongDisplay__Item__Name"},S.a.decode(t.name)),s.a.createElement("div",{className:"SongDisplay__Item__TrackWin"},n),s.a.createElement("div",{className:"SongDisplay__Item__TrackVotes"},t.votes),s.a.createElement("div",{className:"SongDisplay__Item__Musician"},s.a.createElement(u.b,{to:"/bandit/".concat(t.music),className:"ProfileLink"},t.music)),s.a.createElement("div",{className:"SongDisplay__Item__MusicVotes"},t.musicvote),s.a.createElement("div",{className:"SongDisplay__Item__Lyricist"},s.a.createElement(u.b,{to:"/bandit/".concat(t.lyrics),className:"ProfileLink"},t.lyrics)),s.a.createElement("div",{className:"SongDisplay__Item__LyricVotes"},t.lyricsvote),s.a.createElement("div",{className:"SongDisplay__Item__Vocals"},s.a.createElement(u.b,{to:"/bandit/".concat(t.vocals),className:"ProfileLink"},t.vocals)),s.a.createElement("div",{className:"SongDisplay__Item__VocalVotes"},t.vocalsvote))}));e.setState({songJSX:t})},e.segmentedSongRender=function(){var t=e.state.Songs.length,a=Math.floor(t/25),n="",o=Object(h.a)(e.state.Songs);console.log(o);for(var r=0;r<a;r++){var i=o.splice(0,25),c=e.state.songJSX;n=i.map((function(t,a){var n=e.convertToTrophy(t.winner);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{key:a,className:"SongDisplay__Item"},s.a.createElement("div",{className:"SongDisplay__Item__PlayIcon"},s.a.createElement("span",{className:"material-icons",onClick:e.props.play,"data-musicSrc":t.streamurl,"data-name":t.name,"data-artists":"".concat(t.music,", ").concat(t.lyrics,", ").concat(t.vocals)},"play_circle_filled")),s.a.createElement("div",{className:"SongDisplay__Item__PlayListAdd"},s.a.createElement("span",{className:"material-icons"},"playlist_add")),s.a.createElement("div",{className:"SongDisplay__Item__Round"},t.round),s.a.createElement("div",{className:"SongDisplay__Item__Name"},S.a.decode(t.name)),s.a.createElement("div",{className:"SongDisplay__Item__TrackWin"},n),s.a.createElement("div",{className:"SongDisplay__Item__TrackVotes"},t.votes),s.a.createElement("div",{className:"SongDisplay__Item__Musician"},s.a.createElement(u.b,{to:"/bandit/".concat(t.music),className:"ProfileLink"},t.music)),s.a.createElement("div",{className:"SongDisplay__Item__MusicVotes"},t.musicvote),s.a.createElement("div",{className:"SongDisplay__Item__Lyricist"},s.a.createElement(u.b,{to:"/bandit/".concat(t.lyrics),className:"ProfileLink"},t.lyrics)),s.a.createElement("div",{className:"SongDisplay__Item__LyricVotes"},t.lyricsvote),s.a.createElement("div",{className:"SongDisplay__Item__Vocals"},s.a.createElement(u.b,{to:"/bandit/".concat(t.vocals),className:"ProfileLink"},t.vocals)),s.a.createElement("div",{className:"SongDisplay__Item__VocalVotes"},t.vocalsvote)))})),c.push(n),e.setState({songJSX:c})}},e.state={Songs:[],loading:!0,songJSX:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("song display rendered"),this.getSongList()}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,0===this.state.songJSX.length?s.a.createElement("div",{className:"MyLoader"},s.a.createElement(N.a,{type:"bars",color:"#7c61f7",height:"5%",width:"5%"})):s.a.createElement("div",{className:"SongDisplay"},this.state.songJSX.map((function(e,t){return e}))))}}]),a}(n.Component),I=a(52),V=a(154),D=(a(204),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).setFileName=function(t){var a=t.target.value.replace(/^.*\\/,"");e.props.propfunction(t),e.setState({filename:a})},e.state={filename:"No file selected."},e}return Object(c.a)(a,[{key:"render",value:function(){var e,t,a,n,o;return this.props.label&&(e=this.props.label),this.props.placeholder&&(t=this.props.placeholder),this.props.name&&(a=this.props.name),this.props.value&&this.props.value,this.props.propfunction&&(o=this.props.propfunction),"textarea"!==(n=null==this.props.type?"text":this.props.type)&&"file"!==n?s.a.createElement("div",{className:"TextInput"},s.a.createElement("label",null,e,":"),s.a.createElement("div",null,s.a.createElement("input",{type:n,placeholder:t,name:a,className:"SubmitSongForm",required:!0,value:this.props.val,onChange:o}))):"file"===n?s.a.createElement("div",{className:"TextInput"},s.a.createElement("label",null,e,":"),s.a.createElement("div",null,s.a.createElement("input",{accept:"audio/*",type:n,name:a,className:"SubmitSongForm__FileInput",required:!0,onChange:this.setFileName})),s.a.createElement("label",{className:"TextInput__FileLabel"},this.state.filename)):s.a.createElement("div",{className:"TextInput"},s.a.createElement("label",null,e,":"),s.a.createElement("div",null,s.a.createElement("textarea",{name:a,className:"SubmitSongForm",placeholder:t,required:!0,onChange:o},this.props.val)))}}]),a}(n.Component)),x=(a(110),a(326)),L=a(327),F=a(329),A=a(328),j=(a(205),a(155)),R=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a),(e=t.call(this)).getAutoCompleteUsers=function(){b()({url:"https://danieledminster.com:8080/users",method:"GET",withCredentials:!0}).then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)}))},e.toggleUser1=function(){e.setState({user1NF:!e.state.user1NF})},e.sessionCheck=function(){var t="".concat(g,"/sessioncheck");fetch(t,{credentials:"include"}).then((function(e){return e.json()})).then((function(t){console.log("Fetch Response: ",t),"key"in t&&!1===e.state.auth&&(e.setState({auth:!0,username:t.key,access_token:t.tokens.access_token,refresh_token:t.tokens.refresh_token,expiry:t.tokens.expires_at,expirySeconds:t.tokens.expires_in}),e.setState({auth:!0}))}))},e.validURL=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},e.setTypeUserAutocomplete=function(t){var a=t.target.value;console.log(t.target);var n=e.state.users;n.push(a),e.setState({users:n})},e.handleSongSubmit=function(t){if(t.preventDefault(),e.state.formValues.song){var a=e.state.formValues,n=a.name,s=a.music,o=a.lyrics,r=a.vocals,i=a.lyricsheet,c=a.song;if(""===n||""===s||""===o||""===r||""===i)return void e.setState({submitted:!0,formResponse:{errors:[{message:"All fields are required."}]}},e.renderFormResponse);console.log(e.state.formValues);var l=new FormData;l.append("name",n),l.append("music",s),l.append("lyrics",o),l.append("vocals",r),l.append("lyricsheet",S.a.encode(i)),l.append("song",c);var m,u=Object(V.a)(l.entries());try{for(u.s();!(m=u.n()).done;){var d=m.value;console.log(d[0]+", "+d[1])}}catch(_){u.e(_)}finally{u.f()}e.setState({uploading:!0,formClass:"veil"}),b()({url:e.state.postURL,method:"POST",data:l,onUploadProgress:function(t){var a=Math.round(100*t.loaded/t.total);e.state.progress>=99&&e.setState({progressText:"Converting..."}),e.setState({progress:a},e.logPercent)}}).then((function(t){e.setState({uploading:!1,submitted:!0,formResponse:t,progressText:"Uploading...",progress:0,formClass:""}),console.log(t)})).catch((function(e){return console.log(e)}))}else e.setState({submitted:!0,formResponse:{errors:[{message:"Song file is required."}]}},e.renderFormResponse)},e.logPercent=function(){return console.log(e.state.progress)},e.setFormMusician=function(t){var a=e.state.formValues;a.music=t.target.value,e.setState({formValues:a})},e.setFormLyricist=function(t){var a=e.state.formValues;a.lyrics=t.target.value,e.setState({formValues:a})},e.setFormVocals=function(t){var a=e.state.formValues;a.vocals=t.target.value,e.setState({formValues:a})},e.setFormLyricsheet=function(t){var a=e.state.formValues;a.lyricsheet=t.target.value,e.setState({formValues:a})},e.setFormSongFile=function(t){var a=e.state.formValues;a.song=t.target.files[0],e.setState({formValues:a})},e.setFormSongName=function(t){var a=e.state.formValues;a.name=t.target.value,e.setState({formValues:a})},e.logState=function(){console.log(e.state.formValues)},e.hideSubmittedInfo=function(){e.setState({submitted:!1})},e.renderFormResponse=function(){console.log("render form response");if("errors"in e.state.formResponse){var t=[];return Object.keys(e.state.formResponse.errors).forEach((function(a){t.push(e.state.formResponse.errors[a].message)})),s.a.createElement("div",{className:"SubmitSong__SubmitInfo"},s.a.createElement("div",{className:"SubmitSong__SubmitInfo__List"},s.a.createElement("ul",null,t.map((function(e,t){return s.a.createElement("li",{key:t},e)})))),s.a.createElement("div",{className:"SubmitSong__SubmitInfo__exit",onClick:e.hideSubmittedInfo},s.a.createElement("a",{"aria-label":"Close Error Notification Box"},"\xd7")))}var a=e.state.formResponse.data,n=a.name,o=a.music,r=a.lyrics,i=a.vocals,c='Song: "'.concat(n,'" successfully submitted for ').concat(o,", ").concat(r,", and ").concat(i,".");return s.a.createElement("div",{className:"SubmitSong__SubmitSuccess"},s.a.createElement("div",{className:"SubmitSong__SubmitSuccess__Message"},c),s.a.createElement("div",{className:"SubmitSong__SubmitInfo__exit",onClick:e.hideSubmittedInfo},s.a.createElement("a",{"aria-label":"Close Success Notification Box"},"\xd7")))};var n="".concat(g,"/create");return e.state={content:"You must be logged in to do that.",postURL:n,submitted:!1,formResponse:"",formPlaceholders:{name:"Never Gonna Give You Up",url:"https://soundcloud.com/doomgrip776/rick-astley-never-gonna-give-you-up-airhorn-remix",music:"A musician",lyrics:"A lyricist",vocals:"A vocals person",lyricsheet:"I wrote you but you still ain't callin'"},formValues:{name:"",music:"",lyrics:"",vocals:"",lyricsheet:"",song:""},auth:!1,uploading:!1,progressText:"Uploading...",formClass:"",users:[],user1NF:!1,user2NF:!1,user3NF:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.sessionCheck(),this.getAutoCompleteUsers()}},{key:"render",value:function(){for(var e=this,t={},a={},n=0,o=Object.entries(this.state.formPlaceholders);n<o.length;n++){var r=Object(I.a)(o[n],2),i=r[0],c=r[1];t[i]=c}for(var l=0,m=Object.entries(this.state.formValues);l<m.length;l++){var u=Object(I.a)(m[l],2),d=u[0],_=u[1];a[d]=_}return!0===this.state.auth?s.a.createElement("div",{className:"SubmitSong"},!1===this.state.submitted?"":this.renderFormResponse(),s.a.createElement("form",{action:"/submit",method:"POST"},!0===this.state.uploading?s.a.createElement("div",{className:"UploadProgress"},this.state.progressText,s.a.createElement(j.ProgressBar,{percent:this.state.progress,filledBackground:"linear-gradient(to right, #ff3019 ,#cf0404)",unfilledBackground:"rgba(0,0,0,0)"})):"",s.a.createElement("h2",null,"Submit a new song"),s.a.createElement("div",{className:"SubmitSong__Formbox "+this.state.formClass},s.a.createElement(D,{label:"Song Name",placeholder:t.name,name:"name",val:a.name,propfunction:this.setFormSongName}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"UserFormFlex"},!1===this.state.user1NF?s.a.createElement(L.a,{id:"combo-box-demo",options:this.state.users,getOptionLabel:function(e){return e},style:{width:500},renderInput:function(t){return s.a.createElement(x.a,Object.assign({},t,{label:"Select a user",variant:"filled",onchange:e.setTypeUserAutocomplete}))}}):s.a.createElement(x.a,{style:{width:500},label:"Enter a user",variant:"filled"}),s.a.createElement(F.a,{control:s.a.createElement(A.a,{checked:this.state.user1InDB,onChange:this.toggleUser1,name:"checkedB",color:"primary"}),label:"Not Found?"})),s.a.createElement(D,{label:"Lyrics",type:"textarea",placeholder:t.lyricsheet,name:"lyricsheet",val:a.lyricsheet,propfunction:this.setFormLyricsheet}),s.a.createElement("div",null,s.a.createElement("button",{className:"SubmitSong__Formbox__Button",onClick:this.handleSongSubmit},"Submit"))))):s.a.createElement("div",{className:"SubmitSong"},s.a.createElement("h4",null,this.state.content))}}]),a}(n.Component),C=(a(215),a(216),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).sessionCheck=function(){var t="".concat(g,"/sessioncheck");fetch(t,{credentials:"include"}).then((function(e){return e.json()})).then((function(t){console.log("Fetch Response: ",t),"key"in t&&!1===e.state.auth&&(e.setState({auth:!0,username:t.key,access_token:t.tokens.access_token,refresh_token:t.tokens.refresh_token,expiry:t.tokens.expires_at,expirySeconds:t.tokens.expires_in}),e.setState({auth:!0}))}))},e.handleSongSubmit=function(t){if(t.preventDefault(),e.validURL(e.state.formValues.url)){var a="".concat(g,"/update/")+e.props.match.params.id;console.log(e.state.formValues),console.log(a),fetch(a,{method:"PATCH",credentials:"include",body:JSON.stringify(e.state.formValues),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({submitted:!0,formResponse:t})})).catch((function(e){console.log(e)}))}else e.setState({submitted:!0,formResponse:{errors:{url:{message:"Invalid Song URL"}}}})},e.validURL=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},e.getSongByID=function(){var t=e.props.match.params.id,a="".concat(g,"/song/id/");fetch(a+t,{credentials:"include",method:"get"}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({song:t,formValues:t})}))},e.setFormMusician=function(t){var a=e.state.formValues;a.music=t.target.value,e.setState({formValues:a})},e.setFormLyricist=function(t){var a=e.state.formValues;a.lyrics=t.target.value,e.setState({formValues:a})},e.setFormVocals=function(t){var a=e.state.formValues;a.vocals=t.target.value,e.setState({formValues:a})},e.setFormLyricsheet=function(t){var a=e.state.formValues;a.lyricsheet=t.target.value,e.setState({formValues:a})},e.setFormSongName=function(t){var a=e.state.formValues;a.name=t.target.value,e.setState({formValues:a})},e.logState=function(){console.log(e.state.formValues)},e.handleFormUpdate=function(t){for(var a=t.target,n=a.name,s=a.value,o={},r=0,i=Object.entries(e.state.formValues);r<i.length;r++){var c=Object(I.a)(i[r],2),l=c[0],m=c[1];o[l]=l===n?"lyricsheet"===l?S.a.encode(s):s:"lyricsheet"===l?S.a.encode(m):m}e.setState({formValues:o},e.logState)},e.logState=function(){console.log(e.state.formValues)},e.hideSubmittedInfo=function(){e.setState({submitted:!1})},e.renderFormResponse=function(){if("errors"in e.state.formResponse){var t=[];return Object.keys(e.state.formResponse.errors).forEach((function(a){t.push(e.state.formResponse.errors[a].message)})),s.a.createElement("div",{className:"SubmitSong__SubmitInfo"},s.a.createElement("div",{className:"SubmitSong__SubmitInfo__List"},s.a.createElement("ul",null,t.map((function(e,t){return s.a.createElement("li",{key:t},e)})))),s.a.createElement("div",{className:"SubmitSong__SubmitInfo__exit",onClick:e.hideSubmittedInfo},s.a.createElement("a",{"aria-label":"Close Error Notification Box"},"\xd7")))}console.log("log form response",e.state.formResponse);var a=e.state.formResponse,n=a.name,o=a.music,r=a.lyrics,i=a.vocals,c='Song: "'.concat(n,'" successfully updated for ').concat(o,", ").concat(r,", and ").concat(i,".");return s.a.createElement("div",{className:"SubmitSong__SubmitSuccess"},s.a.createElement("div",{className:"SubmitSong__SubmitSuccess__Message"},c),s.a.createElement("div",{className:"SubmitSong__SubmitInfo__exit",onClick:e.hideSubmittedInfo},s.a.createElement("a",{"aria-label":"Close Success Notification Box"},"\xd7")))},e.state={content:"You must be logged in to do that.",submitted:!1,formResponse:"",formValues:{name:"",url:"",music:"",lyrics:"",vocals:"",lyricsheet:"",votes:"",musicvote:"",lyricsvote:"",vocalsvote:"",number:"0"},auth:!1,loaded:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("Song editor initialized"),this.sessionCheck(),this.getSongByID()}},{key:"render",value:function(){for(var e={},t=0,a=Object.entries(this.state.formValues);t<a.length;t++){var n=Object(I.a)(a[t],2),o=n[0],r=n[1];e[o]=r}return!0===this.state.auth?s.a.createElement("div",{className:"SongEditor"},!1===this.state.submitted?"":this.renderFormResponse(),void 0!==this.state.song?s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{action:"/edit",method:"PATCH"},s.a.createElement(D,{name:"name",label:"Song Name",val:this.state.formValues.name,propfunction:this.setFormSongName,placeholder:""}),s.a.createElement(D,{name:"url",label:"URL",val:this.state.formValues.url,propfunction:this.handleFormUpdate}),s.a.createElement(D,{name:"music",label:"Musician",val:this.state.formValues.music,propfunction:this.setFormMusician,placeholder:""}),s.a.createElement(D,{name:"lyrics",label:"Lyricist",val:this.state.formValues.lyrics,propfunction:this.setFormLyricist,placeholder:""}),s.a.createElement(D,{name:"lyrics",label:"Vocals",val:this.state.formValues.vocals,propfunction:this.setFormVocals,placeholder:""}),s.a.createElement(D,{name:"lyricsheet",label:"Lyricsheet",val:S.a.decode(this.state.formValues.lyricsheet),type:"textarea",propfunction:this.setFormLyricsheet,placeholder:""}),s.a.createElement("div",{className:"SongEditor__Votesbox"},s.a.createElement(D,{name:"votes",label:"Track Votes",val:this.state.formValues.votes,propfunction:this.handleFormUpdate}),s.a.createElement(D,{name:"musicvote",label:"Music Votes",val:this.state.formValues.musicvote,propfunction:this.handleFormUpdate}),s.a.createElement(D,{name:"lyricsvote",label:"Lyrics Votes",val:this.state.formValues.lyricsvote,propfunction:this.handleFormUpdate}),s.a.createElement(D,{name:"vocalsvote",label:"Vocals Votes",val:this.state.formValues.vocalsvote,propfunction:this.handleFormUpdate})),s.a.createElement("div",{className:"SongEditor__Submit"},s.a.createElement("button",{className:"SongEditor__Button",onClick:this.handleSongSubmit},"Submit")))):""):s.a.createElement("div",{className:"SongEditor"},s.a.createElement("h3",null,this.state.content))}}]),a}(n.Component)),O=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).deleteSong=function(t){var a=t.target.getAttribute("data-id");if(window.confirm("Are you sure you want to delete this song?")){var n="".concat(g,"/delete/").concat(a);fetch(n,{method:"DELETE",credentials:"include"}).then((function(e){return e.json()})).then((function(t){for(var n=e.state.songs,s=-1,o=0;o<n.length;o++)if(n[o]._id===a){s=o;break}n.splice(s,1),e.setState({songs:n,deletedSong:!0,jsonResponse:t.response})}))}},e.hideNotification=function(){e.setState({deletedSong:!1})},e.state={auth:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="".concat(g,"/all/desc");fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({songs:t})}))}},{key:"showDeletedResponse",value:function(){return s.a.createElement("div",{className:"AdminSongDisplay__MessageSuccess"},s.a.createElement("div",{className:"AdminSongDisplay__MessageSuccess__Message"},this.state.jsonResponse),s.a.createElement("div",{className:"AdminSongDisplay__MessageSuccess__X"},s.a.createElement("a",{onClick:this.hideNotification,"aria-label":"Close Success Notification Box"},"\xd7")))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"AdminSongDisplayContainer"},!0===this.state.deletedSong?this.showDeletedResponse():"",s.a.createElement("div",{className:"AdminSongDisplay__Titlebar"},s.a.createElement("div",{className:"AdminSongDisplay__Titlebar__Round"},"#"),s.a.createElement("div",{className:"AdminSongDisplay__Titlebar__Name"},"Name"),s.a.createElement("div",{className:"AdminSongDisplay__Titlebar__Musician"},"Musician"),s.a.createElement("div",{className:"AdminSongDisplay__Titlebar__Lyricist"},"Lyricist"),s.a.createElement("div",{className:"AdminSongDisplay__Titlebar__Vocalist"},"Vocalist"),s.a.createElement("div",{className:"AdminSongDisplay__Titlebar__Vote"},"T"),s.a.createElement("div",{className:"AdminSongDisplay__Titlebar__Vote"},"M"),s.a.createElement("div",{className:"AdminSongDisplay__Titlebar__Vote"},"L"),s.a.createElement("div",{className:"AdminSongDisplay__Titlebar__Vote"},"V"),s.a.createElement("div",{className:"AdminSongDisplay__Titlebar__Delete"},"Delete")),"songs"in this.state?this.state.songs.map((function(t,a){return s.a.createElement("div",{key:a,className:"AdminSongDisplay__Item"},s.a.createElement("div",{className:"AdminSongDisplay__Item__Round"},t.round),s.a.createElement("div",{className:"AdminSongDisplay__Item__Name"},s.a.createElement(u.b,{to:"/admin/edit/".concat(t._id)},S.a.decode(t.name))),s.a.createElement("div",{className:"AdminSongDisplay__Item__Musician"},t.music),s.a.createElement("div",{className:"AdminSongDisplay__Item__Lyricist"},t.lyrics),s.a.createElement("div",{className:"AdminSongDisplay__Item__Vocalist"},t.vocals),s.a.createElement("div",{className:"AdminSongDisplay__Item__Vote"},t.votes),s.a.createElement("div",{className:"AdminSongDisplay__Item__Vote"},t.musicvote),s.a.createElement("div",{className:"AdminSongDisplay__Item__Vote"},t.lyricsvote),s.a.createElement("div",{className:"AdminSongDisplay__Item__Vote"},t.vocalsvote),s.a.createElement("div",{className:"AdminSongDisplay__Item__Delete"},s.a.createElement("a",{"aria-label":"Close Success Notification Box","data-id":t._id,onClick:e.deleteSong},"X")))})):s.a.createElement("div",{className:"MyLoader"},s.a.createElement(N.a,{type:"spin",color:"#7c61f7",height:"5%",width:"5%"})))}}]),a}(n.Component),T=(a(217),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).convertToTrophy=function(e){return null==e?"":1===parseInt(e)?s.a.createElement("span",{className:"material-icons"},"emoji_events"):void 0},e.getSongList=function(){var t=e.props.match.params.user;console.log("starting song api request");var a="".concat(g,"/user/").concat(t);b.a.get(a).then((function(t){console.log("bandit songs axios: ",t),e.setState({Songs:t.data},e.getSongJSX)}))},e.getSongJSX=function(){var t=e.state.Songs.map((function(t,a){var n=e.convertToTrophy(t.winner);return s.a.createElement("div",{key:a,className:"SongDisplay__Item"},s.a.createElement("div",{className:"SongDisplay__Item__PlayIcon"},s.a.createElement("span",{className:"material-icons",onClick:e.props.play,"data-musicSrc":t.streamurl,"data-name":t.name,"data-artists":"".concat(t.music,", ").concat(t.lyrics,", ").concat(t.vocals)},"play_circle_filled")),s.a.createElement("div",{className:"SongDisplay__Item__PlayListAdd"},s.a.createElement("span",{className:"material-icons"},"playlist_add")),s.a.createElement("div",{className:"SongDisplay__Item__Round"},t.round),s.a.createElement("div",{className:"SongDisplay__Item__Name"},S.a.decode(t.name)),s.a.createElement("div",{className:"SongDisplay__Item__TrackWin"},n),s.a.createElement("div",{className:"SongDisplay__Item__TrackVotes"},t.votes),s.a.createElement("div",{className:"SongDisplay__Item__Musician"},s.a.createElement(u.b,{to:"/bandit/".concat(t.music),className:"ProfileLink"},t.music)),s.a.createElement("div",{className:"SongDisplay__Item__MusicVotes"},t.musicvote),s.a.createElement("div",{className:"SongDisplay__Item__Lyricist"},s.a.createElement(u.b,{to:"/bandit/".concat(t.lyrics),className:"ProfileLink"},t.lyrics)),s.a.createElement("div",{className:"SongDisplay__Item__LyricVotes"},t.lyricsvote),s.a.createElement("div",{className:"SongDisplay__Item__Vocals"},s.a.createElement(u.b,{to:"/bandit/".concat(t.vocals),className:"ProfileLink"},t.vocals)),s.a.createElement("div",{className:"SongDisplay__Item__VocalVotes"},t.vocalsvote))}));e.setState({songJSX:t})},e.state={Songs:[],loading:!0,songJSX:""},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("bandit display rendered",this.props),this.getSongList()}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,""===this.state.songJSX?s.a.createElement("div",{className:"MyLoader"},s.a.createElement(N.a,{type:"spin",color:"#7c61f7",height:"5%",width:"5%"})):s.a.createElement("div",{className:"SongDisplay"},this.state.songJSX))}}]),a}(n.Component)),M=a(162),w=(a(218),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).startPlayer=function(t){console.log(t.target.getAttribute("data-name"),t.target.getAttribute("data-artists"),t.target.getAttribute("data-musicsrc")),e.state.playerActive?e.setState({audioList:{name:t.target["data-name"],singer:t.target["data-artists"],musicSrc:t.target["data-url"]}}):e.setState({playerActive:!0,opts:{mode:"full",toggleMode:!1,autoHiddenCover:!0,glassBg:!0,showThemeSwitch:!1,showDownload:!1,preload:!0},audio:[{name:t.target.getAttribute("data-name"),singer:t.target.getAttribute("data-artists"),musicSrc:t.target.getAttribute("data-musicsrc")}]})},e.play=function(e){},e.sessionCheck=function(){var t="".concat(g,"/sessioncheck");fetch(t,{credentials:"include"}).then((function(e){return e.json()})).then((function(t){console.log("Fetch Response: ",t),"key"in t&&!1===e.state.auth&&(e.setState({auth:!0,username:t.key,access_token:t.tokens.access_token,refresh_token:t.tokens.refresh_token,expiry:t.tokens.expires_at,expirySeconds:t.tokens.expires_in}),e.setState({auth:!0}))}))},e.state={auth:!1,content:"You must be logged in to do that.",playerActive:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.sessionCheck()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(u.a,null,s.a.createElement(f,null),s.a.createElement(d.c,null,s.a.createElement(d.a,{exact:!0,path:"/",render:function(){return s.a.createElement(k,{play:e.startPlayer})}}),s.a.createElement(d.a,{exact:!0,path:"/submitsong",component:R}),s.a.createElement(d.a,{exact:!0,path:"/bandit/:user",render:function(t){return s.a.createElement(T,Object.assign({},t,e.state))}}),!0===this.state.auth?s.a.createElement(d.a,{path:"/admin"},s.a.createElement("div",{className:"AdminContainer"},s.a.createElement("div",{className:"AdminMenuBar"},s.a.createElement("div",{className:"AdminMenuBar__Header"}," Moderator Functions"),s.a.createElement("div",{className:"AdminMenuBar__Link"},s.a.createElement(u.b,{to:"/admin"},"Song List View")),s.a.createElement("div",{className:"AdminMenuBar__Link"},"Round List View")),s.a.createElement(d.c,null,s.a.createElement(d.a,{path:"/admin/edit/:id",render:function(e){return s.a.createElement(C,e)}}),s.a.createElement(d.a,{exact:!0,path:"/admin",component:O})))):s.a.createElement(d.a,{path:"/admin"},s.a.createElement("h3",{className:"Nope"},this.state.content))),!0===this.state.playerActive?s.a.createElement(M.a,Object.assign({},this.state.opts,{audioLists:this.state.audio})):""))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[173,1,2]]]);
//# sourceMappingURL=main.09472726.chunk.js.map